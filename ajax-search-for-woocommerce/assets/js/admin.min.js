!function(e){var s={inputSel:"dgwt-wcas-options-toggle input[type=radio]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(s){var t=e('[name="'+s+'"]').closest("."+this.groupSel),a=e('[name="'+s+'"]:checked').val(),i="";this.hideAll(t),(a=a.replace("_","-")).length>0&&(i="wcas-opt-"+a),e("."+i).length>0&&e("."+i).fadeIn()},hideAll:function(e){e.find('tr[class*="wcas-opt-"]').hide()},registerListeners:function(){var s=this;e("."+s.inputSel).on("change",function(){s.reloadChoices(e(this).attr("name"))})},init:function(){var s=this,t=e("."+s.inputSel+":checked");t.length>0&&(s.registerListeners(),t.each(function(){s.reloadChoices(e(this).attr("name"))}))}},t={inputSel:"dgwt-wcas-options-cb-toggle input[type=checkbox]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(s){var t=s.closest("."+this.groupSel),a=s.is(":checked"),i="";this.hideAll(t);var n=s.attr("name");n=(n=(n=n.replace("dgwt_wcas_settings[","")).replace("]","")).replace(new RegExp("_","g"),"-"),a&&(i="wcas-opt-"+n),i.length>0&&e("."+i).length>0&&e("."+i).fadeIn()},hideAll:function(e){e.find('tr[class*="wcas-opt-"]').hide()},registerListeners:function(){var s=this;e("."+s.inputSel).on("change",function(){s.reloadChoices(e(this))})},init:function(){var s=this,t=e("."+s.inputSel);t.length>0&&(s.registerListeners(),t.each(function(){s.reloadChoices(e(this))}))}},a={actionTriggerClass:"js-ajax-build-index",actionStopTriggerClass:"js-ajax-stop-build-index",indexingWrappoerClass:"js-dgwt-wcas-indexing-wrapper",getWrapper:function(){return e("."+this.indexingWrappoerClass).closest(".dgwt-wcas-settings-info")},registerListeners:function(){var s=this;e(document).on("click","."+s.actionTriggerClass,function(t){t.preventDefault();var a=e(this);a.attr("disabled","disabled"),e(".dgwt-wcas-settings-info").addClass("wcas-ajax-build-index-wait");var i=!!a.hasClass("js-ajax-build-index-emergency");i&&(e(".dgwt-wcas-indexing-header__title").text("[Emergency mode] Wait... Indexing in progress"),e(".dgwt-wcas-indexing-header__troubleshooting, .dgwt-wcas-indexing-header__actions, .js-dgwt-wcas-indexer-details").hide()),e.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index",emergency:i},success:function(e){void 0!==e&&e.success&&(s.getWrapper().html(e.data.html),s.heartbeat())},complete:function(){a.removeAttr("disabled"),e(".dgwt-wcas-settings-info").removeClass("wcas-ajax-build-index-wait"),i&&window.location.reload()}})}),e(document).on("click","."+s.actionStopTriggerClass,function(t){t.preventDefault();var a=e(this);a.attr("disabled","disabled"),e.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_stop_build_index"},success:function(e){void 0!==e&&e.success&&(s.getWrapper().html(e.data.html),s.heartbeat())},complete:function(){a.removeAttr("disabled")}})})},heartbeat:function(){var s=this;setTimeout(function(){e.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index_heartbeat"},success:function(e){void 0!==e&&e.success&&(s.getWrapper().html(e.data.html),e.data.loop&&s.heartbeat())}})},1e3)},detailsToggle:function(){var s;e(document).on("click",".js-dgwt-wcas-indexing-details-trigger",function(t){t.preventDefault();var a=e(".js-dgwt-wcas-indexer-details");a.hasClass("show")?(a.removeClass("show"),a.addClass("hide"),e(".js-dgwt-wcas-indexing__showd").addClass("show").removeClass("hide"),e(".js-dgwt-wcas-indexing__hided").addClass("hide").removeClass("show"),s=!1):(a.addClass("show"),a.removeClass("hide"),e(".js-dgwt-wcas-indexing__showd").addClass("hide").removeClass("show"),e(".js-dgwt-wcas-indexing__hided").addClass("show").removeClass("hide"),s=!0),e.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_index_details_toggle",display:s}})})},init:function(){this.registerListeners(),e("."+this.indexingWrappoerClass).length>0&&this.heartbeat(),this.detailsToggle()}},i={actionTriggerClass:"js-dgwt-wcas-bc-wipe-all",switchLeftLabelClass:"js-dgwt-wcas-switch-left",switchRightLabelClass:"js-dgwt-wcas-switch-right",switcherClass:"js-dgwt-wcas-switcher",remindMeLaterClass:"js-dgwt-wcas-bc-remind-me",applyChanges:function(){jQuery(document).on("click","."+this.actionTriggerClass,function(s){s.preventDefault();var t=e(this);t.attr("disabled","disabled"),jQuery.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_bc_keep_latest"},success:function(s){void 0!==s.success&&s.success&&(e(".dgwt_wcas_basic-tab").click(),e(".js-dgwt-wcas-bc-notice").fadeOut(400,function(){e(this).remove()}))},complete:function(){t.removeAttr("disabled")}})})},switchAjaxRequest:function(s,t){var a=this,i=e(".dgwt-wcas-bc-switcher"),n=e(".dgwt-wcas-bc-error"),c=e(".dgwt-wcas-bc-success"),d=e(".js-dgwt-wcas-bc-spinner");i.addClass("dgwt-wcas-non-events"),d.removeClass("dgwt-wcas-hidden"),n.addClass("dgwt-wcas-hidden"),c.addClass("dgwt-wcas-hidden"),s="enable"===s?"enable":"disable",jQuery.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_bc_toggle",state:s},success:function(e){void 0!==e.success&&e.success?(t(),"disable"===s&&a.flashStepsContainer(),setTimeout(function(){c.removeClass("dgwt-wcas-hidden")},500),setTimeout(function(){c.addClass("dgwt-wcas-hidden")},2e3)):(i.removeClass("dgwt-wcas-non-events"),d.addClass("dgwt-wcas-hidden"),n.removeClass("dgwt-wcas-hidden"))},error:function(){n.removeClass("dgwt-wcas-hidden")},complete:function(){i.removeClass("dgwt-wcas-non-events"),d.addClass("dgwt-wcas-hidden")}})},enableBC:function(){var s=this;s.switchAjaxRequest("enable",function(){e("."+s.switcherClass).attr("checked",!0),e("."+s.switchLeftLabelClass).addClass("dgwt-wcas-toggler--is-active"),e("."+s.switchRightLabelClass).removeClass("dgwt-wcas-toggler--is-active"),e(".dgwt-wcas-toggle").addClass("dgwt-wcas-toggle--mute"),e(".js-dgwt-wcas-todo-old").removeClass("dgwt-wcas-hidden"),e(".js-dgwt-wcas-todo-latest").addClass("dgwt-wcas-hidden")})},disableBC:function(){var s=this;s.switchAjaxRequest("disable",function(){e("."+s.switcherClass).attr("checked",!1),e("."+s.switchRightLabelClass).addClass("dgwt-wcas-toggler--is-active"),e("."+s.switchLeftLabelClass).removeClass("dgwt-wcas-toggler--is-active"),e(".dgwt-wcas-toggle").removeClass("dgwt-wcas-toggle--mute"),e(".js-dgwt-wcas-todo-old").addClass("dgwt-wcas-hidden"),e(".js-dgwt-wcas-todo-latest").removeClass("dgwt-wcas-hidden")})},remindMeLater:function(){jQuery.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_bc_remind_me_later"},success:function(s){void 0!==s.success&&s.success&&e(".js-dgwt-wcas-bc-notice").fadeOut(400,function(){e(this).remove()})}})},flashStepsContainer:function(){var s=e(".dgwt-wcas-bc-todo-wrapp");s.addClass("dgwt-wcas-anim-shake"),setTimeout(function(){s.removeClass("dgwt-wcas-anim-shake")},2e3)},switchListeners:function(){var s=this;e("."+s.switchLeftLabelClass).on("click",function(){s.enableBC()}),e("."+s.switchRightLabelClass).on("click",function(){s.disableBC()}),e("."+s.switcherClass).on("click",function(t){t.preventDefault(),e("."+s.switcherClass).is(":checked")?s.enableBC():s.disableBC()}),e("."+s.remindMeLaterClass).on("click",function(e){e.preventDefault(),s.remindMeLater()})},init:function(){this.applyChanges(),this.switchListeners()}},n={init:function(){var s=e(".dgwt-wcas-selectize");s.length>0&&s.each(function(){var s=e(this).data("options"),t=[];if(s.length>0){s=JSON.parse('["'+decodeURI(s.replace(/&/g,'","').replace(/=/g,'","'))+'"]');var a="";s.forEach(function(e,s){if((s+1)%2==0){var i={value:e,label:a};t.push(i),a=""}a=e})}e(this).selectize({persist:!1,maxItems:null,valueField:"value",labelField:"label",searchField:["value","label"],create:function(e){return{value:e,label:e}},options:t})})}};e(document).ready(function(){var c;s.init(),t.init(),(c=e(".js-dgwt-wcas-sgs-autocolspan")).length>0&&c.find("td").attr("colspan",2),i.init(),a.init(),n.init()})}(jQuery);